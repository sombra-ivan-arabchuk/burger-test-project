(this["webpackJsonpburger-test-project"]=this["webpackJsonpburger-test-project"]||[]).push([[0],{100:function(e,n,t){e.exports=t(157)},105:function(e,n,t){},106:function(e,n,t){},157:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),i=t(8),o=t.n(i),c=(t(105),t(106),t(10)),l=t(39),u=t.n(l),s=t(46),d=t(13),m=Object(a.createContext)({isOnline:!0});function f(e){var n=e.children,t=function(){var e=Object(a.useState)(!0),n=Object(d.a)(e,2),t=n[0],r=n[1];return Object(a.useEffect)((function(){window.addEventListener("online",(function(){return r(!0)})),window.addEventListener("offline",(function(){return r(!1)}))}),[]),{isOnline:t}}();return r.a.createElement(m.Provider,{value:t},n)}var b=function(){return Object(a.useContext)(m)};var g={home:"/burger-test-project",catalog:"/burger-test-project/catalog"},p=Object(a.createContext)({user:{name:"",email:""},token:"",signOut:function(){return console.log()},signIn:function(){return Promise.resolve("")}});function v(e){var n=e.children,t=function(){var e=Object(a.useState)(),n=Object(d.a)(e,2)[1],t=Object(a.useState)(""),r=Object(d.a)(t,2),i=r[0],o=r[1],l=Object(a.useState)({name:"",email:""}),m=Object(d.a)(l,2),f=m[0],p=m[1],v=b().isOnline,h=function(){var e=Object(s.a)(u.a.mark((function e(n){var t,a,r,c,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.gapi.auth2.getAuthInstance(),e.next=3,t.signIn();case 3:return a=e.sent,r=a.getBasicProfile(),c={name:r.getGivenName(),email:r.getEmail()},l=a.getAuthResponse().id_token,localStorage.setItem("token",l),localStorage.setItem("user",JSON.stringify(c)),o(l),p(c),n.push(g.catalog),e.abrupt("return",i);case 13:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){var e=function(){!function(){var e=localStorage.getItem("token"),n=localStorage.getItem("user");o(e||"");n&&p(JSON.parse(n))}()},t=function(e){console.log("error",e)},a=window.gapi;a?a.load("auth2",(function(){a.auth2.init(Object(c.a)({},"client_id","572926868404-jf8u20cba81glkuej1qht0sbh6ib9qpo.apps.googleusercontent.com")).then(e,t)})):window.myFunc=n}),[v,window.gapi]),{token:i,user:f,signIn:h,signOut:function(e){localStorage.clear(),o(""),p({name:"",email:""}),e.push(g.home)}}}();return r.a.createElement(p.Provider,{value:t},n)}var h=function(){return Object(a.useContext)(p)};var E=t(47),w=t.n(E),x=w.a.create({baseURL:"https://api.nutritionix.com/v1_1/",timeout:1e3,headers:{"Content-type":"application/json"}});x.interceptors.request.use((function(e){return e.params=e.params||{},e.params.appId="73a67f21",e.params.appKey="ae606d37e49327cb15fdba90f4111820",e}));var k=x,j={salad:"5da6c2339094e13219339f14",meat:"561e795169fc03824d08345e",cheese:"5976643fa690431a53463b05",bacon:"561e6c16c265794042cb5f20"},O=Object(a.createContext)({ingredients:[]});function y(e){var n=e.children,t=function(){var e=Object(a.useState)([]),n=Object(d.a)(e,2),t=n[0],r=n[1],i=b().isOnline;return Object(a.useEffect)((function(){!function(){var e=localStorage.getItem("ingredients");if(e){var n=JSON.parse(e);r(n)}else Promise.all(Object.keys(j).map(function(){var e=Object(s.a)(u.a.mark((function e(n){var t,a,r,i,o,c,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u=j[n],k.get("item",{params:{id:u}});case 2:return t=e.sent,a=t.data,r=a.nf_calories,i=a.nf_sodium,o=a.nf_vitamin_a_dv,c=a.nf_vitamin_c_dv,l={calories:r,sodium:i,vitaminA:o,vitaminC:c},e.abrupt("return",{key:n,detailedInfo:l});case 7:case"end":return e.stop()}var u}),e)})));return function(n){return e.apply(this,arguments)}}())).then((function(e){localStorage.setItem("ingredients",JSON.stringify(e)),r(e)}))}()}),[i]),{ingredients:t}}();return r.a.createElement(O.Provider,{value:t},n)}var C=t(14),S=t(93),I=t(21),A=t(188),N=t(201),B=t(190),D=t(191),_=t(192),W=Object(A.a)((function(e){return{grow:{flexGrow:1},appBar:{background:"rgb(255,141,85)"},title:Object(c.a)({display:"none"},e.breakpoints.up("sm"),{display:"block"}),sectionDesktop:Object(c.a)({display:"none"},e.breakpoints.up("md"),{display:"flex"}),sectionMobile:Object(c.a)({display:"flex"},e.breakpoints.up("md"),{display:"none"})}})),L=Object(I.f)((function(e){var n=e.history,t=W(),a=h(),i=a.signIn,o=a.signOut,c=""===a.user.name?r.a.createElement(N.a,{color:"inherit",onClick:function(){return i(n)}},"Login"):r.a.createElement(N.a,{color:"inherit",onClick:function(){return o(n)}},"Logout");return r.a.createElement("div",{className:t.grow},r.a.createElement(B.a,{position:"static",className:t.appBar},r.a.createElement(D.a,null,r.a.createElement(_.a,{className:t.title,variant:"h6",noWrap:!0},"Burger-App"),r.a.createElement("div",{className:t.grow}),r.a.createElement("div",{className:t.sectionDesktop},c),r.a.createElement("div",{className:t.sectionMobile},c))))})),R=t(19),P=t(35),z=t(15),F=w.a.create({baseURL:"https://burger-app-eaa1f.firebaseio.com/"});function J(){var e=Object(C.a)(["\n  width: 10%;\n  height: 15%;\n  position: absolute;\n  background-color: white;\n  left: 64%;\n  top: 50%;\n  border-radius: 40%;\n  transform: rotate(10deg);\n  box-shadow: inset -3px 0 #c9c9c9;\n\n  &::before {\n    content: '';\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    background-color: white;\n    left: 150%;\n    top: -130%;\n    border-radius: 40%;\n    transform: rotate(90deg);\n    box-shadow: inset 1px 3px #c9c9c9;\n  }\n\n  &::after {\n    content: '';\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    background-color: white;\n    left: -170%;\n    top: -260%;\n    border-radius: 40%;\n    transform: rotate(60deg);\n    box-shadow: inset -1px 2px #c9c9c9;\n  }\n"]);return J=function(){return e},e}function T(){var e=Object(C.a)(["\n  width: 10%;\n  height: 15%;\n  position: absolute;\n  background-color: white;\n  left: 30%;\n  top: 50%;\n  border-radius: 40%;\n  transform: rotate(-20deg);\n  box-shadow: inset -2px -3px #c9c9c9;\n\n  :before {\n    content: '';\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    background-color: white;\n    left: 180%;\n    top: -50%;\n    border-radius: 40%;\n    transform: rotate(60deg);\n    box-shadow: inset -1px -3px #c9c9c9;\n  }\n\n  :after {\n    content: '';\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    background-color: white;\n    left: -170%;\n    top: -260%;\n    border-radius: 40%;\n    transform: rotate(60deg);\n    box-shadow: inset -1px 2px #c9c9c9;\n  }\n"]);return T=function(){return e},e}function U(){var e=Object(C.a)(["\n  height: 20%;\n  width: 80%;\n  background: linear-gradient(#bc581e, #e27b36);\n  border-radius: 50% 50% 0 0;\n  box-shadow: inset -15px 0 #c15711;\n  margin: 2% auto;\n  position: relative;\n"]);return U=function(){return e},e}function M(){var e=Object(C.a)(["\n  height: 13%;\n  width: 80%;\n  background: #f08e4a;\n  border-radius: 0 0 30px 30px;\n  box-shadow: inset -15px 0 #c15711;\n  margin: 2% auto;\n"]);return M=function(){return e},e}var q={width:"90%",height:"4.5%",margin:"2% auto",background:"linear-gradient(#f4d004, #d6bb22)",borderRadius:"20px"},G={width:"80%",height:"8%",background:"linear-gradient(#7f3608, #702e05)",margin:"2% auto",borderRadius:"15px"},V={width:"85%",height:"7%",margin:"2% auto",background:"linear-gradient(#228c1d, #91ce50)",borderRadius:"20px"},H={width:"80%",height:"3%",background:"linear-gradient(#bf3813, #c45e38)",margin:"2% auto"},K=z.a.div(M()),$=z.a.div(U()),Q=z.a.div(T()),X=z.a.div(J()),Y=function(e){var n=null;switch(e.type){case"bread-bottom":n=r.a.createElement(K,null);break;case"bread-top":n=r.a.createElement($,null,r.a.createElement(Q,null),r.a.createElement(X,null));break;case"meat":n=r.a.createElement("div",{style:G});break;case"cheese":n=r.a.createElement("div",{style:q});break;case"salad":n=r.a.createElement("div",{style:V});break;case"bacon":n=r.a.createElement("div",{style:H});break;default:n=null}return n};function Z(){var e=Object(C.a)(["\n  width: 100%;\n  margin: auto;\n  height: 100%;\n  text-align: center;\n  font-weight: bold;\n  fontsize: 1.2rem;\n"]);return Z=function(){return e},e}var ee=z.a.div(Z()),ne=function(e){var n=e.ingredients,t=e.name,a=e.isEditing,i=void 0!==a&&a,o=Object.keys(n).map((function(e){return Object(R.a)(Array(n[e])).map((function(n,t){return r.a.createElement(Y,{key:e+t,type:e})}))})).reduce((function(e,n){return e.concat(n)}),[]);return 0===o.length&&o.push(r.a.createElement("p",null,"please start adding ingredients")),r.a.createElement(ee,null,!i&&r.a.createElement("div",{style:{fontSize:"20px",fontWeight:"bold",marginBottom:"10px"}},t),r.a.createElement(Y,{type:"bread-top"}),o,r.a.createElement(Y,{type:"bread-bottom"}))},te=t(51),ae=t.n(te),re=function(e){var n=e.children,t=e.isOpen,a=e.label;return r.a.createElement(ae.a,{isOpen:t,contentLabel:a,ariaHideApp:!0},n)};function ie(){var e=Object(C.a)(["\n  padding: 10px;\n  font-weight: bold;\n  width: 80px;\n"]);return ie=function(){return e},e}function oe(){var e=Object(C.a)(["\n  display: block,\n  font: inherit;\n  padding: 5px;\n  margin: 0 5px;\n  width: 80px;\n  border: 1px solid #AA6817;\n  cursor: pointer;\n  outline: none;\n  \n  &::disabled {\n  background-color: #AC9980;\n  border: 1px solid #7E7365;\n  color: #ccc;\n  cursor: default;\n  }\n  \n  &::hover:disabled {\n  background-color: #AC9980;\n  color: #ccc;\n  cursor: not-allowed;\n  }\n  \n  ","\n  \n"]);return oe=function(){return e},e}function ce(){var e=Object(C.a)(["\n  background-color: #cf8f2e;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin: 5px 0;\n"]);return ce=function(){return e},e}var le=z.a.div(ce()),ue=z.a.button(oe(),(function(e){return"less"===e.buttonType?"\n  background-color: #D39952;\n  color: white;\n  :hover, :active {\n  background-color: #DAA972;\n  color: white;\n  }\n  ":"\n  background-color: #8F5E1E;\n  color: white;\n  :hover, :active {\n  background-color: #99703F;\n  color: white;\n  }\n  "})),se=z.a.div(ie()),de=function(e){var n=e.label,t=e.addIngredient,a=e.removeIngredient;return r.a.createElement(le,null,r.a.createElement(se,null,n),r.a.createElement(ue,{buttonType:"less",onClick:function(){return a()}},"less"),r.a.createElement(ue,{buttonType:"more",onClick:function(){return t()}},"more"))};function me(){var e=Object(C.a)(["\n  width: 100%;\n  background-color: #cf8f2e;\n  display: flex;\n  flex-flow: column;\n  align-items: center;\n  box-shadow: 0 2px 1px #ccc;\n  margin: auto;\n  padding: 10px;\n"]);return me=function(){return e},e}var fe=[{label:"Salad",type:"salad"},{label:"Bacon",type:"bacon"},{label:"Cheese",type:"cheese"},{label:"Meat",type:"meat"}],be=z.a.div(me()),ge=function(e){var n=e.addIngredient,t=e.removeIngredient;return r.a.createElement(be,null,fe.map((function(e){return r.a.createElement(de,{key:e.label,label:e.label,addIngredient:function(){return n(e.type)},removeIngredient:function(){return t(e.type)}})})))},pe=function(e){var n=e.children,t=e.isDisabled,a=e.onClick;return r.a.createElement(N.a,{disabled:t,onClick:a,style:{backgroundColor:"#F08E49"}},n)},ve=t(200),he=function(e){var n=e.value,t=e.onChange,a=e.label;return r.a.createElement(ve.a,{style:{width:"100%"},value:n,onChange:t,id:"outlined-basic",label:a,variant:"outlined"})},Ee=function(e){var n=e.addBurger,t=e.updateBurger,i=e.ingredientsSet,o=e.burgerName,c=e.id,l=Object(a.useState)(""!==o),u=Object(d.a)(l,1)[0],s=Object(a.useState)(o||""),m=Object(d.a)(s,2),f=m[0],b=m[1],g=Object(a.useState)(i||{salad:0,meat:0,cheese:0,bacon:0}),p=Object(d.a)(g,2),v=p[0],h=p[1];return r.a.createElement("div",{style:{height:"400px"}},r.a.createElement("div",{style:{margin:"50px 0"}},r.a.createElement(he,{value:f,onChange:function(e){b(e.target.value)},label:"Burger Name"})),r.a.createElement(ne,{ingredients:v,name:f,isEditing:u}),r.a.createElement(ge,{addIngredient:function(e){var n=v[e]+1,t=Object(P.a)({},v);t[e]=n,h(t)},removeIngredient:function(e){var n=v[e];if(!(n<=0)){var t=n-1,a=Object(P.a)({},v);a[e]=t,h(a)}}}),c?r.a.createElement(pe,{isDisabled:!1,onClick:function(){var e={ingredients:v,name:f};(function(e,n){return F.put("/orders/".concat(e,".json/"),n)})(c,e).then((function(){t(e)}))}},"edit"):r.a.createElement(pe,{isDisabled:!1,onClick:function(){var e,t={ingredients:v,name:f};(e=t,F.post("/orders.json",e)).then((function(e){var a=e.data.name;n(Object(P.a)({},t,{id:a}))}))}},"save"))},we=t(195),xe=t(194),ke=t(197),je=t(196),Oe=t(162),ye=t(198),Ce=t(193),Se=t(61),Ie=t.n(Se),Ae=t(92),Ne=t.n(Ae),Be=Ie()((function(e){return{head:{backgroundColor:e.palette.common.black,color:e.palette.common.white},body:{fontSize:14}}}))(Ce.a),De=Ie()((function(e){return{root:{"&:nth-of-type(odd)":{backgroundColor:e.palette.background.default}}}}))(xe.a),_e=Ne()({table:{}}),We=function(e){return Math.round(e)},Le=function(e){var n=e.ingredients,t=_e(),i=Object(a.useContext)(O).ingredients,o=Object.keys(n).reduce((function(e,t){var a=n[t],r=i.find((function(e){return e.key===t})),o=r?r.detailedInfo:{},c=o.vitaminA,l=void 0===c?0:c,u=o.vitaminC,s=void 0===u?0:u,d=o.sodium,m=void 0===d?0:d,f=o.calories,b=void 0===f?0:f;return{vitaminA:We(e.vitaminA+l*parseInt(a)),vitaminC:We(e.vitaminC+s*parseInt(a)),sodium:We(e.sodium+m*parseInt(a)),calories:We(e.calories+b*parseInt(a))}}),{vitaminA:0,vitaminC:0,sodium:0,calories:0});return r.a.createElement("div",null,r.a.createElement(we.a,{component:Oe.a},r.a.createElement(je.a,{className:t.table,"aria-label":"customized table"},r.a.createElement(ke.a,null,r.a.createElement(xe.a,null,r.a.createElement(Be,{align:"right"},"Vitamin A"),r.a.createElement(Be,{align:"right"},"Vitamin C"),r.a.createElement(Be,{align:"right"},"Sodium"),r.a.createElement(Be,{align:"right"},"Calories"))),r.a.createElement(ye.a,null,r.a.createElement(De,null,r.a.createElement(Be,{align:"right"},o.vitaminA),r.a.createElement(Be,{align:"right"},o.vitaminC),r.a.createElement(Be,{align:"right"},o.sodium),r.a.createElement(Be,{align:"right"},o.calories))))))},Re=t(199);function Pe(){var e=Object(C.a)(["\n  -webkit-box-shadow: 2px 2px 15px -6px rgba(0, 0, 0, 0.75);\n  -moz-box-shadow: 2px 2px 15px -6px rgba(0, 0, 0, 0.75);\n  box-shadow: 2px 2px 15px -6px rgba(0, 0, 0, 0.75);\n  margin: 10px;\n\n  height: 300px;\n  text-align: center;\n  font-weight: bold;\n  fontsize: 1.2rem;\n  max-width: 450px;\n"]);return Pe=function(){return e},e}var ze=z.a.div(Pe()),Fe=function(){var e=Object(a.useState)(!1),n=Object(d.a)(e,2),t=n[0],i=n[1],o=b().isOnline,c=r.a.useState([]),l=Object(d.a)(c,2),u=l[0],s=l[1],m=r.a.useState(null),f=Object(d.a)(m,2),g=f[0],p=f[1];Object(a.useEffect)((function(){var e=setInterval((function(){F.get("orders.json").then((function(e){var n=e.data,t=void 0===n?{}:n,a=t||{},r=Object.keys(a).filter((function(e){return!u.some((function(n){return n.id===e}))})).map((function(e){return Object(P.a)({},t[e],{id:e})}));s(u.concat(r))}))}),0===u.length?1e3:5e3);return function(){return clearInterval(e)}}),[o,u]);var v=function(e){(function(e){return F.delete("orders/".concat(e,".json"))})(e).then((function(){var n=u.filter((function(n){return n.id!==e}));s(n)}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(re,{isOpen:t,label:"Burger Builder"},r.a.createElement("div",null,r.a.createElement("div",{onClick:function(){i(!1),p(null)}},"close"),r.a.createElement(Ee,{addBurger:function(e){s([].concat(Object(R.a)(u),[e])),i(!1),p(null)},updateBurger:function(e){var n=u.filter((function(e){return e.id!==(null===g||void 0===g?void 0:g.id)}));s([].concat(Object(R.a)(n),[Object(P.a)({},e,{id:null===g||void 0===g?void 0:g.id})])),p(null),i(!1)},ingredientsSet:null===g||void 0===g?void 0:g.ingredients,burgerName:null===g||void 0===g?void 0:g.name,id:null===g||void 0===g?void 0:g.id}))),u.map((function(e){var n=e.ingredients,t=e.name,a=e.id;return r.a.createElement(Re.a,{container:!0},r.a.createElement(Re.a,{item:!0,xs:12,sm:6},r.a.createElement(ze,null,r.a.createElement("div",{style:{display:"flex",flexDirection:"row",height:"100%"}},r.a.createElement(ne,{ingredients:n,name:t}),r.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},r.a.createElement(pe,{isDisabled:!1,onClick:function(){p(e),i(!0)}},"Edit"),r.a.createElement(pe,{isDisabled:!1,onClick:function(){v(a)}},"remove"))))),r.a.createElement(Re.a,{item:!0,xs:12,sm:6},r.a.createElement("div",null,r.a.createElement(Le,{ingredients:n}))))})),r.a.createElement("div",{style:{position:"fixed",bottom:"5%",right:"10%"}},r.a.createElement(pe,{onClick:function(){return i(!0)},isDisabled:!1},"open builder")))},Je=Object(I.f)((function(e){var n=e.history,t=h().token;return console.log(t),""!==t&&n.push(g.catalog),r.a.createElement("div",null,"asdfasdfasdf")}));function Te(){var e=Object(C.a)(["\n  width: 100%;\n  background-color: yellow;\n  height: 50px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: fixed;\n  bottom: 0%;\n  z-index: 1;\n"]);return Te=function(){return e},e}var Ue=z.a.div(Te()),Me=function(){var e=b().isOnline;return r.a.createElement(r.a.Fragment,null,r.a.createElement(S.a,null,r.a.createElement("div",null,r.a.createElement(L,null)),r.a.createElement(I.c,null,r.a.createElement(I.a,{exact:!0,path:g.home},r.a.createElement(Je,null)),r.a.createElement(I.a,{path:g.catalog},r.a.createElement(Fe,null)))),!e&&r.a.createElement(Ue,null,"you are offline"))},qe=function(){return r.a.createElement("div",null,r.a.createElement(f,null,r.a.createElement(v,null,r.a.createElement(y,null,r.a.createElement(Me,null)))))},Ge=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Ve(e,n){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),n&&n.onUpdate&&n.onUpdate(e)):(console.log("Content is cached for offline use."),n&&n.onSuccess&&n.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}ae.a.setAppElement("#root"),o.a.render(r.a.createElement(qe,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/burger-test-project",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var n="".concat("/burger-test-project","/service-worker.js");Ge?(!function(e,n){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(t){var a=t.headers.get("content-type");404===t.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Ve(e,n)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(n,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):Ve(n,e)}))}}()}},[[100,1,2]]]);
//# sourceMappingURL=main.39776211.chunk.js.map